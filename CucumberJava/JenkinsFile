pipeline {
    agent { 
     dockerfile
            { filename 'Dockerfile'
              args '-u root -v /ms/rep:/root/.m2/repository'   
            
            }
          }
    stages {
        stage('Source') {
            steps {
                sh 'mvn --version'
                sh 'git --version'
                git branch: 'master',
                    url: 'https://github.com/lokeshsampath/JenkinsTest.git'
            }
        }
        stage('Test') {
            steps { 
                    sh 'cp -pR /chromedriver/chromedriver /app/src/test/resources/drivers/' 
                    sh ' cd /app/CucumberJava ; mvn -e clean test'                
            }
        }      
    }
}
