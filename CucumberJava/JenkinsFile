pipeline {
    agent { 
     dockerfile
            { filename 'Dockerfile'
              args '-u root -v /root/.m2:/root/.m2/repository'   
            
            }
          }
    stages {
        stage('Source') {
            steps {
                sh 'mvn --version'
                sh 'git --version'
                git branch: 'master',
                    url: 'https://github.com/lokeshsampath/JenkinsTest.git'
            }
        }
        stage('Test') {
            steps {   
                    dir("${env.WORKSPACE}/CucumberJava")
                    {
                    sh "chmod +x -R /src/test/resources/drivers/chromedriver"
                    sh 'mvn -e clean test' }
            }
        }      
    }
}
